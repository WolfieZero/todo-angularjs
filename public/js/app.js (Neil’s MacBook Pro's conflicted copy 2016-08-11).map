{"version":3,"sources":["app.js","config.js","router.js","todo.controller.js","todo.directive.js","todo.model.js","directives.js","modules.js"],"names":["let","const"],"mappings":"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","file":"app.js","sourcesContent":["// =============================================================================\n// App\n// =============================================================================\n\n\n// Module\n// =============================================================================\n\nlet app = angular.module('app', [\n    'templates',\n    'ui.router',\n    'restangular',\n    'underdash',\n    'mb-dragToReorder'\n]);\n\n\n// Run\n// =============================================================================\n\napp.run([\n    '$rootScope',\n    ($rootScope) => {\n\n        $rootScope.user_id = 1;\n\n    }\n]);\n","// =============================================================================\n// Config\n// =============================================================================\n\n\napp.config(['RestangularProvider', (RestangularProvider) => {\n\n    // Setup Restangular\n    // =========================================================================\n    // We set the base URL but also provide empty keys that we set in `run()`.\n\n    let baseApiUrl = 'http://todo.boomchinchilla.com/api/';\n    if (window.location.hostname === 'localhost') {\n        baseApiUrl = 'http://todo.app/api/';\n    }\n\n    RestangularProvider\n        .setBaseUrl(baseApiUrl);\n\n\n}]);\n","// =============================================================================\n// Routes\n// =============================================================================\n\napp.config([\n    '$stateProvider', '$urlRouterProvider',\n    ($stateProvider, $urlRouterProvider) => {\n\n        $urlRouterProvider.otherwise('/todos');\n\n        $stateProvider\n\n            .state('login', {\n                url: '/login',\n                templateUrl: 'login/login.html',\n                controller: 'LoginController'\n            })\n\n            .state('todos', {\n                url: '/todos',\n                templateUrl: 'todos/todos.html',\n                controller: 'TodosController'\n            })\n\n        ;\n\n    }\n]);\n","// =============================================================================\n// Todos Controller\n// =============================================================================\n\n\napp.controller('TodosController', [\n    '$rootScope', '$scope', 'Todo',\n    ($rootScope, $scope, Todo) => {\n\n        /**\n         * Set the scope locally.\n         * @type  {Object}\n         */\n        let $s = $scope;\n\n        /**\n         * Add todo to list.\n         * @return  {void}\n         */\n        $s.addTodo = () => {\n            let todo = {\n                task: $s.newTodo,\n                user_id: 1,\n                order: $s.todos.length\n            };\n            $s.newTodo = '';\n            $s.todos.push(todo);\n            Todo.post(todo);\n        };\n\n\n\n        $s.delete = (key) => {\n            if (confirm('Delete this todo?')) {\n                console.log('deleted', key);\n                // Todo.doDELETE(scope.todo.id);\n                $s.todos.splice(key);\n            }\n        };\n\n        /**\n         * React to the todo list being dragged and dropped.\n         */\n        $s.$on('dragToReorder.reordered', ($event, reordered) => {\n            let updatedTodo = {\n                task: reordered.item.task,\n                user_id: reordered.item.user_id,\n                order: reordered.to - 1\n            }\n            // _.forEach(reordered, key)\n            Todo.customPUT(updatedTodo, reordered.item.id);\n            return console.log(reordered);\n        });\n\n        /**\n         * Get the todo list.\n         */\n        Todo.get('all').then((todos) => {\n            $s.todos = todos;\n        });\n\n    }\n]);\n","// =============================================================================\n// Task Directive\n// =============================================================================\n\n\napp.directive('todo', [\n    '$rootScope', '$timeout', 'Todo',\n    ($rootScope, $timeout, Todo) => {\n    return {\n        restrict: 'E',\n        templateUrl: 'todos/todo.html',\n        scope: {\n            todo: '=value'\n        },\n        link: function(scope, element) {\n\n            scope.todo.edit = false;\n\n            element.on('dblclick', () => {\n                scope.$apply(function () {\n                    scope.todo.edit = true;\n                });\n            });\n\n            element.bind('focusout', () => {\n                scope.$apply(function () {\n                    scope.todo.edit = false;\n                });\n            });\n\n            /**\n             * Watch for `todo.complete` changes.\n             */\n            scope.$watch('todo.complete', (newValue, oldValue) => {\n                if (scope.todo.complete == '1') {\n                    scope.todo.complete = true;\n                } else {\n                    scope.todo.complete = false;\n                }\n\n                if (newValue !== oldValue && oldValue !== 0 && oldValue !== 1) {\n                    let updatedTodo = {\n                        task: scope.todo.task,\n                        user_id: $rootScope.user_id,\n                        complete: ((scope.todo.complete) ? '1' : '0')\n                    };\n                    Todo.customPUT(updatedTodo, scope.todo.id);\n                }\n            });\n\n            /**\n             * Watch for `todo.task` changes.\n             */\n            scope.$watch('todo.task', (newValue, oldValue) => {\n                if (newValue !== oldValue) {\n                    let updatedTodo = {\n                        task: newValue,\n                        user_id: $rootScope.user_id,\n                        complete: ((scope.todo.complete) ? '1' : '0')\n                    };\n                    Todo.customPUT(updatedTodo, scope.todo.id);\n                }\n            });\n\n            /**\n             * Watch for on focus changes.\n             * If `todo.edit` is `true` then we need to focus on input field.\n             */\n            scope.$watch('todo.edit', function (value) {\n                if (value === true) {\n                    $timeout(() => {\n                        // Yeah, I'm cheating here...\n                        // TODO Use correct selection method\n                        let input = element[0].children[1].children[0];\n                        input.focus();\n                        input.select();\n                    });\n                }\n            });\n\n        }\n    };\n}]);\n","// =============================================================================\n// Todos Model\n// =============================================================================\n\n\napp.factory('Todo', [\n    'Restangular', (Restangular) => {\n        var service = Restangular.all('todo');\n        return service;\n    }\n]);\n","// =============================================================================\n// Shared directives\n// =============================================================================\n\n\n// On enter\n// =============================================================================\n\napp.directive('onEnter', () => {\n    return {\n        restrict: 'A',\n        link: (scope, element, attrs) => {\n\n            element.bind('keypress', (event) => {\n                if (event.which === 13) {\n                    scope.$apply(() => {\n                        scope.$eval(attrs.onEnter);\n                    });\n                }\n            });\n\n        }\n    };\n});\n","// =============================================================================\n// Shared Modules\n// =============================================================================\n\n\n// Lodash / Underscore\n// =============================================================================\n// See: https://lodash.com/docs\n// See: http://underscorejs.org/\n\nconst underdash = angular\n    .module('underdash', [])\n    .factory('helper', function() {\n        return window._;\n    }\n);\n"],"sourceRoot":"/source/"}